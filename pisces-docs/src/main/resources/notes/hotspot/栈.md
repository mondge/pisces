# 栈
### &emsp;&emsp; 一、X86与栈帧 `TODO`<br>
&emsp;&emsp;&emsp;&emsp; 英特尔32位架构(简称IA-32),常称为i386,x86-32或x86,是英特尔公司推出的复杂指令集架构。<br/>
&emsp;&emsp;&emsp;&emsp; 寄存器是CPU计算单元的存储单元
### &emsp;&emsp; 二、Java栈 <br>
&emsp;&emsp;&emsp;&emsp; JVM的解释器执行引擎也称为基于栈的执行引擎 <br/>

#### &emsp;&emsp; HopSpot中的栈
&emsp;&emsp;&emsp;&emsp; Java栈是由虚拟机自动管理,程序员不能自己操纵栈 <br/>
&emsp;&emsp;&emsp;&emsp; Java开发中,new生成一个对象,对象的引用放在栈里,对象是存放在堆里。每当启用一个线程时,JVM就为线程分配一个Java栈,栈是以帧为单位保存当前线程的运行状态。<br>
&emsp;&emsp;&emsp;&emsp; 某个线程当前正在执行的方法称为 **当前方法**，当前方法使用的栈帧称为 **当前帧**，当前方法所有的类称为 **当前类**，当前类的常量池称为 **当前常量池**。当线程执行一个方法时，它会跟踪当前常量池 <br/>
&emsp;&emsp;&emsp;&emsp; 每当线程调用一个Java方法时,JVM就会在该线程对应的栈中压入一个帧,这个帧就是当前帧.当执行这个方法时，它就使用这个帧存储参数,局部变量和中间运算结果<br>
&emsp;&emsp;&emsp;&emsp; Java栈上的所有数据都是私有的。任何线程都不能访问另外一个线程的栈数据。所以不需要考虑多线程情况下栈数据访问同步的情况。

&emsp;&emsp;&emsp;&emsp; **栈帧** <br>
&emsp;&emsp;&emsp;&emsp; Java栈中,调用一个方法时,为当前栈分配一个帧，然后将该帧压入栈。帧中存储了对应方法的局部数据,方法执行完,对应的帧则从栈中弹出,并把返回结果存储在调用方法的帧的操作数栈中。<br>
&emsp;&emsp;&emsp;&emsp; **栈帧** 是用于支持虚拟机进行方法调用和方法执行的数据结构,是JVM运行时数据区中的虚拟机栈的元素。栈帧存储了方法的*局部变量表、操作数栈、动态链接*和*方法返回地址*等信息。方法的调用过程对应着栈帧在虚拟机栈里从入栈到出栈的过程。<br>
&emsp;&emsp;&emsp;&emsp; 对执行引擎来说，活动线程中，只有栈顶的栈帧是有效的。执行引擎所运行的所有字节码指令都只针对当前栈帧进行操作。<br>

&emsp;&emsp;&emsp;&emsp; 使用下列几个元素对栈帧进行动态描述 <br>
&emsp;&emsp;&emsp;&emsp; 1.**SP**:栈指针(stack pointer) <br/>
&emsp;&emsp;&emsp;&emsp; 2.**PC**:程序计数器(program counter),指向将要执行的指令 <br/>
&emsp;&emsp;&emsp;&emsp; 3.**CB**:指CodeBlob指针,CodeBlob存储了pc所指指令的实现 <br/>

&emsp;&emsp;&emsp;&emsp; **局部变量区** `TODO`<br>
&emsp;&emsp;&emsp;&emsp; 局部变量表是一组变量值存储空间，用于存储方法参数和方法内部定义的局部变量。在Java程序边编译成class文件时，就在方法的Code属性的max_locals数据项中确定了该方法所需要分配的最大局部变量表的容量。

&emsp;&emsp;&emsp;&emsp; **操作数栈** <br>
&emsp;&emsp;&emsp;&emsp; JVM的解释器执行引擎也称为基于栈的执行引擎，其中所指的栈就是指操作数栈。<br>
&emsp;&emsp;&emsp;&emsp; JVM指令是从操作数栈中而不是寄存器中取得操作数的，操作数栈的深度由Code属性max_stacks在编译期确定,可以理解为存储计算时临时数据的存储区域,被组织成一个以字长为单位的数组,通过入栈和出栈来访问。

##### 参考资料:<br>
&emsp;&emsp;[X86汇编快速入门](http://www.cnblogs.com/YukiJohnson/archive/2012/10/27/2741836.html) <br>
&emsp;&emsp;[深度解析Java中的try-catch](https://wiki.sankuai.com/pages/viewpage.action?pageId=1053383479)