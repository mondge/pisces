<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">
    
    <title>JVM致命错误日志（hs_err_pid）解读</title>
    <meta name="description" content="致命错误出现的时候，JVM生成了hs_err_pid&lt;pid&gt;.log这样的文件，其中往往包含了虚拟机崩溃原因的重要信息。因为经常遇 到，在这篇文章里，我挑选了一个，并且逐段分析它包含的内容（文件可以在文章最后下载）。">
    <meta name="keywords" content="JVM">
    <!--<base target="_blank">--><base href="." target="_blank">
    <link rel="stylesheet" type="text/css" href="./hs_err_pid/article_head.css">
    <link rel="stylesheet" type="text/css" href="./hs_err_pid/article_layout.css">
    <script src="./hs_err_pid/hm.js"></script><script src="./hs_err_pid/hm.js"></script><script type="text/javascript" src="./hs_err_pid/jquery.min.js"></script>
    <script type="text/javascript" src="./hs_err_pid/developer.js"></script>
<script src="./hs_err_pid/share.js"></script><link rel="stylesheet" href="./hs_err_pid/share_style0_16.css"><link rel="stylesheet" type="text/css" href="./hs_err_pid/layout_51cto.css"></head>
<body>
<div class="main">
    <!-- 左侧内容 -->
    <div class="main_left">
        <div class="wznr">
            <h2>JVM致命错误日志（hs_err_pid）解读</h2>
        </div>
        <div class="zwnr">
            <p>致命错误出现的时候，JVM生成了hs_err_pid&lt;pid&gt;.log这样的文件，其中往往包含了虚拟机崩溃原因的重要信息。因为经常遇 到，在这篇文章里，我挑选了一个，并且逐段分析它包含的内容（文件可以在文章最后下载）。默认情况下文件是创建在工作目录下的（如果没权限创建的话JVM 会尝试把文件写到/tmp这样的临时目录下面去），当然，文件格式和路径也可以通过参数指定，比如：</p>
<pre><ol class="dp-j"><li class="alt"><span><span>java&nbsp;-XX:ErrorFile=/var/log/java/java_error%p.log&nbsp;</span></span></li></ol></pre>
<p>这个文件将包括：</p>
<ul>
    <li>触发致命错误的操作异常或者信号；</li>
    <li>版本和配置信息；</li>
    <li>触发致命异常的线程详细信息和线程栈；</li>
    <li>当前运行的线程列表和它们的状态；</li>
    <li>堆的总括信息；</li>
    <li>加载的本地库；</li>
    <li>命令行参数；</li>
    <li>环境变量；</li>
    <li>操作系统CPU的详细信息。</li>
</ul>
<p>首先，看到的是对问题的概要介绍：</p>
<pre><ol class="dp-j"><li class="alt"><span><span>#&nbsp;&nbsp;SIGSEGV&nbsp;(</span><span class="number">0xb</span><span>)&nbsp;at&nbsp;pc=</span><span class="number">0x03568cf4</span><span>,&nbsp;pid=</span><span class="number">16819</span><span>,&nbsp;tid=</span><span class="number">3073346448</span><span>&nbsp;</span></span></li></ol></pre>
<p>一个非预期的错误被JRE检测到，其中：</p>
<ul>
    <li>SIGSEGV是信号名称</li>
    <li>0xb是信号码</li>
    <li>pc=0x03568cf4指的是程序计数器的值</li>
    <li>pid=16819是进程号</li>
    <li>tid=3073346448是线程号</li>
</ul>
<p>如果你对JVM有了解，应该不会对这些东西陌生。</p>
<p>接下来是JRE和JVM的版本信息：</p>
<pre><ol class="dp-j"><li class="alt"><span><span>#&nbsp;JRE&nbsp;version:&nbsp;</span><span class="number">6</span><span>.0_32-b05&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>#&nbsp;Java&nbsp;VM:&nbsp;Java&nbsp;HotSpot(TM)&nbsp;Server&nbsp;VM&nbsp;(<span class="number">20.7</span><span>-b02&nbsp;mixed&nbsp;mode&nbsp;linux-x86&nbsp;)&nbsp;</span></span></li></ol></pre>
<p>运行在mixed模式下。</p>
<p>然后是问题帧的信息：</p>
<pre><ol class="dp-j"><li class="alt"><span><span>#&nbsp;Problematic&nbsp;frame:&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>#&nbsp;C&nbsp;&nbsp;[libgtk-x11-<span class="number">2.0</span><span>.so.</span><span class="number">0</span><span>+</span><span class="number">0x19fcf4</span><span>]&nbsp;&nbsp;__float128+</span><span class="number">0x19fcf4</span><span>&nbsp;</span></span></li></ol></pre>
<ul>
    <li>C：帧类型为本地帧，帧的类型包括：<br>
    <ul>
        <li>C：本地C帧</li>
        <li>j：解释的Java帧</li>
        <li>V：虚拟机帧</li>
        <li>v：虚拟机生成的存根栈帧</li>
        <li>J：其他帧类型，包括编译后的Java帧</li>
    </ul>
    </li>
    <li>libgtk-x11-2.0.so.0+0x19fcf4：和程序计数器（pc）表达的含义一样，但是用的是本地so库+偏移量的方式。</li>
</ul>
<p>接下去第一部分是线程信息：</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Current&nbsp;thread&nbsp;(</span><span class="number">0x09f30c00</span><span>):&nbsp;&nbsp;JavaThread&nbsp;</span><span class="string">"main"</span><span>&nbsp;[_thread_in_native,&nbsp;id=</span><span class="number">16822</span><span>,&nbsp;stack(</span><span class="number">0xb72a8000</span><span>,</span><span class="number">0xb72f9000</span><span>)]&nbsp;</span></span></li></ol></pre>
<p>当前线程的：</p>
<ul>
    <li>0x09f30c00：指针</li>
    <li>JavaThread：线程类型，可能的类型包括：<br>
    <ul>
        <li>JavaThread</li>
        <li>VMThread</li>
        <li>CompilerThread</li>
        <li>GCTaskThread</li>
        <li>WatcherThread</li>
        <li>ConcurrentMarkSweepThread</li>
    </ul>
    </li>
    <li>main：名字<br>
    <ul>
        <li>_thread_in_native：线程当前状态，状态枚举包括：</li>
        <li>_thread_uninitialized：线程还没有创建，它只在内存原因崩溃的时候才出现</li>
        <li>_thread_new：线程已经被创建，但是还没有启动</li>
        <li>_thread_in_native：线程正在执行本地代码，一般这种情况很可能是本地代码有问题</li>
        <li>_thread_in_vm：线程正在执行虚拟机代码</li>
        <li>_thread_in_Java：线程正在执行解释或者编译后的Java代码</li>
        <li>_thread_blocked：线程处于阻塞状态</li>
        <li>…_trans：以_trans结尾，线程正处于要切换到其它状态的中间状态</li>
    </ul>
    </li>
    <li>id=16822：线程ID</li>
    <li>0xb72a8000,0xb72f9000：栈区间</li>
</ul>
<pre><ol class="dp-j"><li class="alt"><span><span>siginfo:si_signo=SIGSEGV:&nbsp;si_errno=</span><span class="number">0</span><span>,&nbsp;si_code=</span><span class="number">1</span><span>&nbsp;(SEGV_MAPERR),&nbsp;si_addr=</span><span class="number">0x00000010</span><span>&nbsp;</span></span></li></ol></pre>
<p>这部分是导致虚拟机终止的非预期的信号信息，含义前面已经大致提到过了。其中si_errno和si_code是Linux下用来鉴别异常的，Windows下是一个ExceptionCode。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>EAX=</span><span class="number">0x00000000</span><span>,&nbsp;EBX=</span><span class="number">0x0375dd84</span><span>,&nbsp;ECX=</span><span class="number">0x00000000</span><span>,&nbsp;EDX=</span><span class="number">0x00000000</span><span>&nbsp;</span></span></li><li><span>ESP=<span class="number">0xb72f0fa0</span><span>,&nbsp;EBP=</span><span class="number">0xb72f0fb8</span><span>,&nbsp;ESI=</span><span class="number">0x00000000</span><span>,&nbsp;EDI=</span><span class="number">0x0a6c1800</span><span>&nbsp;</span></span></li><li class="alt"><span>EIP=<span class="number">0x03568cf4</span><span>,&nbsp;EFLAGS=</span><span class="number">0x00010246</span><span>,&nbsp;CR2=</span><span class="number">0x00000010</span><span>&nbsp;</span></span></li></ol></pre>
<p>这是寄存器上下文。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Top&nbsp;of&nbsp;Stack:&nbsp;(sp=</span><span class="number">0xb72f0fa0</span><span>)&nbsp;</span></span></li><li><span><span class="number">0xb72f0fa0</span><span>:&nbsp;&nbsp;&nbsp;</span><span class="number">00000000</span><span>&nbsp;</span><span class="number">00402250</span><span>&nbsp;0040217f&nbsp;0375dd84&nbsp;</span></span></li><li class="alt"><span><span class="number">0xb72f0fb0</span><span>:&nbsp;&nbsp;&nbsp;</span><span class="number">00000000</span><span>&nbsp;0a6c1800&nbsp;b72f0fe8&nbsp;0356c2c0&nbsp;</span></span></li><li><span><span class="number">0xb72f0fc0</span><span>:&nbsp;&nbsp;&nbsp;</span><span class="number">00000000</span><span>&nbsp;0a6c1800&nbsp;b72f0fe8&nbsp;003b3e77&nbsp;</span></span></li><li class="alt"><span><span class="number">0xb72f0fd0</span><span>:&nbsp;&nbsp;&nbsp;003e6c8b&nbsp;0a1a70d0&nbsp;0a193358&nbsp;0375dd84&nbsp;</span></span></li><li><span><span class="number">0xb72f0fe0</span><span>:&nbsp;&nbsp;&nbsp;0a276418&nbsp;0a276418&nbsp;b72f1048&nbsp;03536c56&nbsp;</span></span></li><li class="alt"><span><span class="number">0xb72f0ff0</span><span>:&nbsp;&nbsp;&nbsp;0acad000&nbsp;0b3ca978&nbsp;0000000c&nbsp;00dd0674&nbsp;</span></span></li><li><span><span class="number">0xb72f1000</span><span>:&nbsp;&nbsp;&nbsp;</span><span class="number">00000003</span><span>&nbsp;0a2c7d50&nbsp;b72f1038&nbsp;0000330c&nbsp;</span></span></li><li class="alt"><span><span class="number">0xb72f1010</span><span>:&nbsp;&nbsp;&nbsp;ffffffff&nbsp;ffffffff&nbsp;</span><span class="number">00000001</span><span>&nbsp;</span><span class="number">00000001</span><span>&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>Instructions:&nbsp;(pc=<span class="number">0x03568cf4</span><span>)&nbsp;</span></span></li><li><span><span class="number">0x03568cd4</span><span>:&nbsp;&nbsp;&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">14</span><span>&nbsp;</span><span class="number">24</span><span>&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">75</span><span>&nbsp;f8&nbsp;</span><span class="number">89</span><span>&nbsp;d6&nbsp;</span><span class="number">89</span><span>&nbsp;7d&nbsp;fc&nbsp;</span><span class="number">89</span><span>&nbsp;c7&nbsp;e8&nbsp;7e&nbsp;1b&nbsp;</span></span></li><li class="alt"><span><span class="number">0x03568ce4</span><span>:&nbsp;&nbsp;&nbsp;ea&nbsp;ff&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">34</span><span>&nbsp;</span><span class="number">24</span><span>&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">87</span><span>&nbsp;d4&nbsp;</span><span class="number">02</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;e8&nbsp;</span><span class="number">30</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;ea&nbsp;ff&nbsp;</span></span></li><li><span><span class="number">0x03568cf4</span><span>:&nbsp;&nbsp;&nbsp;8b&nbsp;</span><span class="number">40</span><span>&nbsp;</span><span class="number">10</span><span>&nbsp;</span><span class="number">89</span><span>&nbsp;3c&nbsp;</span><span class="number">24</span><span>&nbsp;c7&nbsp;</span><span class="number">44</span><span>&nbsp;</span><span class="number">24</span><span>&nbsp;</span><span class="number">08</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">87</span><span>&nbsp;</span></span></li><li class="alt"><span><span class="number">0x03568d04</span><span>:&nbsp;&nbsp;&nbsp;d0&nbsp;</span><span class="number">02</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;8b&nbsp;</span><span class="number">83</span><span>&nbsp;</span><span class="number">88</span><span>&nbsp;</span><span class="number">24</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">00</span><span>&nbsp;</span><span class="number">89</span><span>&nbsp;</span><span class="number">44</span><span>&nbsp;</span><span class="number">24</span><span>&nbsp;</span><span class="number">04</span><span>&nbsp;e8&nbsp;dd&nbsp;</span></span></li></ol></pre>

<p>栈顶程序计数器旁的操作码，它们可以被反汇编成系统崩溃前执行的指令。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Register&nbsp;to&nbsp;memory&nbsp;mapping:&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>EAX=<span class="number">0x00000000</span><span>&nbsp;is&nbsp;an&nbsp;unknown&nbsp;value&nbsp;</span></span></li><li><span>EBX=<span class="number">0x0375dd84</span><span>:&nbsp;&lt;offset&nbsp;</span><span class="number">0x394d84</span><span>&gt;&nbsp;in&nbsp;/usr/lib/libgtk-x11-</span><span class="number">2.0</span><span>.so.</span><span class="number">0</span><span>&nbsp;at&nbsp;</span><span class="number">0x033c9000</span><span>&nbsp;</span></span></li><li class="alt"><span>ECX=<span class="number">0x00000000</span><span>&nbsp;is&nbsp;an&nbsp;unknown&nbsp;value&nbsp;</span></span></li><li><span>EDX=<span class="number">0x00000000</span><span>&nbsp;is&nbsp;an&nbsp;unknown&nbsp;value&nbsp;</span></span></li><li class="alt"><span>ESP=<span class="number">0xb72f0fa0</span><span>&nbsp;is&nbsp;pointing&nbsp;into&nbsp;the&nbsp;stack&nbsp;</span><span class="keyword">for</span><span>&nbsp;thread:&nbsp;</span><span class="number">0x09f30c00</span><span>&nbsp;</span></span></li><li><span>EBP=<span class="number">0xb72f0fb8</span><span>&nbsp;is&nbsp;pointing&nbsp;into&nbsp;the&nbsp;stack&nbsp;</span><span class="keyword">for</span><span>&nbsp;thread:&nbsp;</span><span class="number">0x09f30c00</span><span>&nbsp;</span></span></li><li class="alt"><span>ESI=<span class="number">0x00000000</span><span>&nbsp;is&nbsp;an&nbsp;unknown&nbsp;value&nbsp;</span></span></li><li><span>EDI=<span class="number">0x0a6c1800</span><span>&nbsp;is&nbsp;an&nbsp;unknown&nbsp;value&nbsp;</span></span></li></ol></pre>
<p>寄存器和内存映射信息。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Stack:&nbsp;[</span><span class="number">0xb72a8000</span><span>,</span><span class="number">0xb72f9000</span><span>],&nbsp;&nbsp;sp=</span><span class="number">0xb72f0fa0</span><span>,&nbsp;&nbsp;free&nbsp;space=291k&nbsp;</span></span></li><li><span>Native&nbsp;frames:&nbsp;(J=compiled&nbsp;Java&nbsp;code,&nbsp;j=interpreted,&nbsp;Vv=VM&nbsp;code,&nbsp;C=<span class="keyword">native</span><span>&nbsp;code)&nbsp;</span></span></li><li class="alt"><span>C&nbsp;&nbsp;[libgtk-x11-<span class="number">2.0</span><span>.so.</span><span class="number">0</span><span>+</span><span class="number">0x19fcf4</span><span>]&nbsp;&nbsp;__float128+</span><span class="number">0x19fcf4</span><span>&nbsp;</span></span></li><li><span>C&nbsp;&nbsp;[libgtk-x11-<span class="number">2.0</span><span>.so.</span><span class="number">0</span><span>+</span><span class="number">0x1a32c0</span><span>]&nbsp;&nbsp;__float128+</span><span class="number">0xc0</span><span>&nbsp;</span></span></li><li class="alt"><span>...&nbsp;...&nbsp;</span></li><li><span>C&nbsp;&nbsp;[libswt-pi-gtk-<span class="number">3738</span><span>.so+</span><span class="number">0x33f6a</span><span>]&nbsp;&nbsp;Java_org_eclipse_swt_internal_gtk_OS__1Call+</span><span class="number">0xf</span><span>&nbsp;</span></span></li><li class="alt"><span>J&nbsp;&nbsp;org.eclipse.swt.internal.gtk.OS._Call(III)I&nbsp;</span></li><li><span>J&nbsp;&nbsp;org.eclipse.swt.internal.gtk.OS.Call(III)I&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li><span>Java&nbsp;frames:&nbsp;(J=compiled&nbsp;Java&nbsp;code,&nbsp;j=interpreted,&nbsp;Vv=VM&nbsp;code)&nbsp;</span></li><li class="alt"><span>J&nbsp;&nbsp;org.eclipse.swt.internal.gtk.OS._Call(III)I&nbsp;</span></li><li><span>J&nbsp;&nbsp;org.eclipse.swt.internal.gtk.OS.Call(III)I&nbsp;</span></li><li class="alt"><span>j&nbsp;&nbsp;org.eclipse.swt.widgets.Widget.fixedSizeAllocateProc(II)I+<span class="number">5</span><span>&nbsp;</span></span></li><li><span>j&nbsp;&nbsp;org.eclipse.swt.widgets.Display.fixedSizeAllocateProc(II)I+<span class="number">17</span><span>&nbsp;</span></span></li><li class="alt"><span>v&nbsp;&nbsp;~StubRoutines::call_stub&nbsp;</span></li></ol></pre>
<p>线程栈。包含了地址、栈顶、栈计数器和线程尚未使用的栈信息，由于栈可能非常长，打印的长度有限制，但是至少本地栈和Java栈都打印出来了（很多时候本地栈打印不出来，但是Java栈一般都能打印出来）。从中可以看到，Eclipse的虚拟机崩溃了。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>ava&nbsp;Threads:&nbsp;(&nbsp;=&gt;&nbsp;current&nbsp;thread&nbsp;)&nbsp;</span></span></li><li><span>&nbsp;&nbsp;<span class="number">0x0b4c1000</span><span>&nbsp;JavaThread&nbsp;</span><span class="string">"Worker-247"</span><span>&nbsp;[_thread_blocked,&nbsp;id=</span><span class="number">25417</span><span>,&nbsp;stack(</span><span class="number">0x741bc000</span><span>,</span><span class="number">0x7420d000</span><span>)]&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;<span class="number">0x0a300c00</span><span>&nbsp;JavaThread&nbsp;</span><span class="string">"Worker-246"</span><span>&nbsp;[_thread_blocked,&nbsp;id=</span><span class="number">25235</span><span>,&nbsp;stack(</span><span class="number">0x7d30c000</span><span>,</span><span class="number">0x7d35d000</span><span>)]&nbsp;</span></span></li><li><span>...&nbsp;...&nbsp;</span></li></ol></pre>
<p>线程信息。一目了然，不解释了。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>VM&nbsp;state:not&nbsp;at&nbsp;safepoint&nbsp;(normal&nbsp;execution)&nbsp;</span></span></li></ol></pre>
<p>虚拟机状态。包括：</p>
<ul>
    <li>not at a safepoint：正常运行状态；</li>
    <li>at safepoint：所有线程都因为虚拟机等待状态而阻塞，等待一个虚拟机操作完成；</li>
    <li>synchronizing：一个特殊的虚拟机操作，要求虚拟机内的其它线程保持等待状态。</li>
</ul>
<pre><ol class="dp-j"><li class="alt"><span><span>VM&nbsp;Mutex/Monitor&nbsp;currently&nbsp;owned&nbsp;by&nbsp;a&nbsp;thread:&nbsp;None&nbsp;</span></span></li></ol></pre>
<p>虚拟机的Mutex和Monitor目前没有被线程持有。Mutex是虚拟机内部的锁，而Monitor则关联到了Java对象。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Heap&nbsp;</span></span></li><li><span>&nbsp;PSYoungGen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;149056K,&nbsp;used&nbsp;125317K&nbsp;[<span class="number">0xa9700000</span><span>,&nbsp;</span><span class="number">0xb41a0000</span><span>,&nbsp;</span><span class="number">0xb41a0000</span><span>)&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;eden&nbsp;space&nbsp;123520K,&nbsp;<span class="number">95</span><span>%&nbsp;used&nbsp;[</span><span class="number">0xa9700000</span><span>,</span><span class="number">0xb0ac0de0</span><span>,</span><span class="number">0xb0fa0000</span><span>)&nbsp;</span></span></li><li><span>&nbsp;&nbsp;from&nbsp;space&nbsp;25536K,&nbsp;<span class="number">26</span><span>%&nbsp;used&nbsp;[</span><span class="number">0xb28b0000</span><span>,</span><span class="number">0xb2f50748</span><span>,</span><span class="number">0xb41a0000</span><span>)&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;to&nbsp;&nbsp;&nbsp;space&nbsp;25600K,&nbsp;<span class="number">0</span><span>%&nbsp;used&nbsp;[</span><span class="number">0xb0fa0000</span><span>,</span><span class="number">0xb0fa0000</span><span>,</span><span class="number">0xb28a0000</span><span>)&nbsp;</span></span></li><li><span>&nbsp;PSOldGen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;261248K,&nbsp;used&nbsp;239964K&nbsp;[<span class="number">0x941a0000</span><span>,&nbsp;</span><span class="number">0xa40c0000</span><span>,&nbsp;</span><span class="number">0xa9700000</span><span>)&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;object&nbsp;space&nbsp;261248K,&nbsp;<span class="number">91</span><span>%&nbsp;used&nbsp;[</span><span class="number">0x941a0000</span><span>,</span><span class="number">0xa2bf7018</span><span>,</span><span class="number">0xa40c0000</span><span>)&nbsp;</span></span></li><li><span>&nbsp;PSPermGen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total&nbsp;163328K,&nbsp;used&nbsp;130819K&nbsp;[<span class="number">0x841a0000</span><span>,&nbsp;</span><span class="number">0x8e120000</span><span>,&nbsp;</span><span class="number">0x941a0000</span><span>)&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;object&nbsp;space&nbsp;163328K,&nbsp;<span class="number">80</span><span>%&nbsp;used&nbsp;[</span><span class="number">0x841a0000</span><span>,</span><span class="number">0x8c160c40</span><span>,</span><span class="number">0x8e120000</span><span>)&nbsp;</span></span></li></ol></pre>
<p>堆信息。新生代、老生代、永久代。对JVM有了解的人应该都清楚，不解释了。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Code&nbsp;Cache&nbsp;&nbsp;[</span><span class="number">0xb4262000</span><span>,&nbsp;</span><span class="number">0xb5ac2000</span><span>,&nbsp;</span><span class="number">0xb7262000</span><span>)&nbsp;</span></span></li><li><span>&nbsp;total_blobs=<span class="number">5795</span><span>&nbsp;nmethods=</span><span class="number">5534</span><span>&nbsp;adapters=</span><span class="number">209</span><span>&nbsp;free_code_cache=</span><span class="number">25103616</span><span>&nbsp;largest_free_block=</span><span class="number">38336</span><span>&nbsp;</span></span></li></ol></pre>
<p>代码缓存（Code Cache）。这是一块用于编译和保存本地代码的内存，注意是本地代码，它和PermGen（永久代）是不一样的，永久带是用来存放Java类定义的。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Dynamic&nbsp;libraries:&nbsp;</span></span></li><li><span><span class="number">00101000</span><span>-</span><span class="number">00122000</span><span>&nbsp;r-xp&nbsp;</span><span class="number">00000000</span><span>&nbsp;</span><span class="number">08</span><span>:</span><span class="number">01</span><span>&nbsp;</span><span class="number">3483560</span><span>&nbsp;&nbsp;&nbsp;&nbsp;/usr/lib/libjpeg.so.</span><span class="number">62.0</span><span>.</span><span class="number">0</span><span>&nbsp;</span></span></li><li class="alt"><span><span class="number">00122000</span><span>-</span><span class="number">00123000</span><span>&nbsp;rwxp&nbsp;</span><span class="number">00020000</span><span>&nbsp;</span><span class="number">08</span><span>:</span><span class="number">01</span><span>&nbsp;</span><span class="number">3483560</span><span>&nbsp;&nbsp;&nbsp;&nbsp;/usr/lib/libjpeg.so.</span><span class="number">62.0</span><span>.</span><span class="number">0</span><span>&nbsp;</span></span></li><li><span><span class="number">00125000</span><span>-</span><span class="number">00130000</span><span>&nbsp;r-xp&nbsp;</span><span class="number">00000000</span><span>&nbsp;</span><span class="number">08</span><span>:</span><span class="number">01</span><span>&nbsp;</span><span class="number">9093202</span><span>&nbsp;&nbsp;&nbsp;&nbsp;/lib/libgcc_s-</span><span class="number">4.1</span><span>.</span><span class="number">2</span><span>-</span><span class="number">20080825</span><span>.so.</span><span class="number">1</span><span>&nbsp;</span></span></li><li class="alt"><span><span class="number">00130000</span><span>-</span><span class="number">00131000</span><span>&nbsp;rwxp&nbsp;0000a000&nbsp;</span><span class="number">08</span><span>:</span><span class="number">01</span><span>&nbsp;</span><span class="number">9093202</span><span>&nbsp;&nbsp;&nbsp;&nbsp;/lib/libgcc_s-</span><span class="number">4.1</span><span>.</span><span class="number">2</span><span>-</span><span class="number">20080825</span><span>.so.</span><span class="number">1</span><span>&nbsp;</span></span></li><li><span>...&nbsp;...&nbsp;</span></li></ol></pre>
<p>内存映射。这些信息是虚拟机崩溃时的虚拟内存列表区域。在定位崩溃原因的时候，它可以告诉你哪些类库正在被使用，位置在哪里，还有堆栈和守护页信息。就以列表中第一条为例说明：</p>
<ul>
    <li>00101000-00122000：内存区域</li>
    <li>r-xp：权限，r/w/x/p/s分别表示读/写/执行/私有/共享</li>
    <li>00000000：文件内的偏移量</li>
    <li>08:01：文件位置的majorID和minorID</li>
    <li>3483560：索引节点号</li>
    <li>/usr/lib/libjpeg.so.62.0.0：文件位置</li>
</ul>
<p>每一个lib都有两块虚拟内存区域――代码和数据，它们的权限不同，代码区域是r-xp；数据区域是rwxp。守护页（guard page）由权限为--xp和rwxp的一对组成。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>VM&nbsp;Arguments:&nbsp;</span></span></li><li><span>jvm_args:&nbsp;-Dosgi.requiredJavaVersion=<span class="number">1.5</span><span>&nbsp;-XX:MaxPermSize=256m&nbsp;-Xms40m&nbsp;-Xmx512m&nbsp;-Dorg.eclipse.swt.browser.XULRunnerPath=</span><span class="string">''</span><span>&nbsp;</span></span></li><li class="alt"><span>java_command:&nbsp;/.../eclipse/plugins/org.eclipse.equinox.launcher_1.<span class="number">2.0</span><span>.v20110502.jar&nbsp;-os&nbsp;linux&nbsp;-ws&nbsp;gtk&nbsp;-arch&nbsp;x86&nbsp;-showsplash&nbsp;-launcher&nbsp;/.../eclipse/eclipse&nbsp;-name&nbsp;Eclipse&nbsp;...&nbsp;</span></span></li><li><span>Launcher&nbsp;Type:&nbsp;SUN_STANDARD&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li><span>Environment&nbsp;Variables:&nbsp;</span></li><li class="alt"><span>PATH=...&nbsp;</span></li><li><span>DISPLAY=:<span class="number">0.0</span><span>&nbsp;</span></span></li></ol></pre>
<p>虚拟机参数和环境变量。</p>
<pre><ol class="dp-j"><li class="alt"><span><span>Signal&nbsp;Handlers:&nbsp;</span></span></li><li><span>SIGSEGV:&nbsp;[libjvm.so+<span class="number">0x726440</span><span>],&nbsp;sa_mask[</span><span class="number">0</span><span>]=</span><span class="number">0x7ffbfeff</span><span>,&nbsp;sa_flags=</span><span class="number">0x10000004</span><span>&nbsp;</span></span></li><li class="alt"><span>SIGBUS:&nbsp;[libjvm.so+<span class="number">0x726440</span><span>],&nbsp;sa_mask[</span><span class="number">0</span><span>]=</span><span class="number">0x7ffbfeff</span><span>,&nbsp;sa_flags=</span><span class="number">0x10000004</span><span>&nbsp;</span></span></li><li><span>...&nbsp;...&nbsp;</span></li></ol></pre>
<p>信号句柄。对于Linux下的信号机制，参阅wiki百科，<a href="http://en.wikipedia.org/wiki/C_signal_handling" target="_blank">链接</a>。</p>

<pre><ol class="dp-j"><li class="alt"><span><span>OS:Red&nbsp;Hat&nbsp;Enterprise&nbsp;Linux&nbsp;Client&nbsp;release&nbsp;</span><span class="number">5.4</span><span>&nbsp;(Tikanga)&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>uname:Linux&nbsp;<span class="number">2.6</span><span>.</span><span class="number">18</span><span>-</span><span class="number">164</span><span>.el5&nbsp;#</span><span class="number">1</span><span>&nbsp;SMP&nbsp;Tue&nbsp;Aug&nbsp;</span><span class="number">18</span><span>&nbsp;</span><span class="number">15</span><span>:</span><span class="number">51</span><span>:</span><span class="number">54</span><span>&nbsp;EDT&nbsp;</span><span class="number">2009</span><span>&nbsp;i686&nbsp;</span></span></li><li><span>libc:glibc&nbsp;<span class="number">2.5</span><span>&nbsp;NPTL&nbsp;</span><span class="number">2.5</span><span>&nbsp;</span></span></li><li class="alt"><span>rlimit:&nbsp;STACK&nbsp;10240k,&nbsp;CORE&nbsp;0k,&nbsp;NPROC&nbsp;<span class="number">65536</span><span>,&nbsp;NOFILE&nbsp;</span><span class="number">1024</span><span>,&nbsp;AS&nbsp;infinity&nbsp;</span></span></li><li><span>load&nbsp;average:<span class="number">1.78</span><span>&nbsp;</span><span class="number">1.58</span><span>&nbsp;</span><span class="number">1.54</span><span>&nbsp;</span></span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li><span>/proc/meminfo:&nbsp;</span></li><li class="alt"><span>...&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>CPU:total&nbsp;<span class="number">4</span><span>&nbsp;(</span><span class="number">4</span><span>&nbsp;cores&nbsp;per&nbsp;cpu,&nbsp;</span><span class="number">1</span><span>&nbsp;threads&nbsp;per&nbsp;core)&nbsp;family&nbsp;</span><span class="number">6</span><span>&nbsp;model&nbsp;</span><span class="number">42</span><span>&nbsp;stepping&nbsp;</span><span class="number">7</span><span>,&nbsp;cmov,&nbsp;cx8,&nbsp;fxsr,&nbsp;mmx,&nbsp;sse,&nbsp;sse2,&nbsp;sse3,&nbsp;ssse3&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class="alt"><span>/proc/cpuinfo:&nbsp;</span></li><li><span>...&nbsp;</span></li><li class="alt"><span>&nbsp;&nbsp;</span></li><li><span>Memory:&nbsp;4k&nbsp;page,&nbsp;physical&nbsp;3631860k(155144k&nbsp;free),&nbsp;swap&nbsp;5124724k(5056452k&nbsp;free)&nbsp;</span></li></ol></pre>
        </div></div></div>


</body></html>